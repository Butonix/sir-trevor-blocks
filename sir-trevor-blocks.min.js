!function(){"use strict";return SirTrevor?void(SirTrevor.Blocks.Button=SirTrevor.Block.extend({type:"button",title:"Button",icon_name:"image",cssProperties:{display:"block",textDecoration:"none",margin:"0 auto",border:"2px solid",textAlign:"center",backgroundColor:{label:"Background Color",input:{type:"color"}},borderWidth:{label:"Border Width",input:{type:"range",min:0,max:6,step:1,units:"px"}},borderColor:{label:"Border Color",input:{type:"color"}},borderRadius:{label:"Border Radius",input:{type:"range",min:0,max:100,step:1,units:"px"}},width:{label:"Width",input:{type:"range",min:10,max:100,step:1,units:"%"}},lineHeight:{label:"Height",input:{type:"range",min:0,max:500,step:1,units:"%"}},fontStyle:{label:"Italic",input:{type:"checkbox",value:"italic"}},fontWeight:{label:"Bold",input:{type:"checkbox",value:"bold"}}},_namePrepend:"st-button",_cssInputNamePrepend:"css_",editorHTML:function(){var e=this,t=$("<div>",{"class":"st-button"}),r=$("<div>",{"class":"st-button-editor"}),n=$("<div>",{"class":"st-button-preview"}),o=[{property:"caption",text:"Caption"},{property:"href",text:"href"},{property:"onclick",text:"On Click"}];return o.forEach(function(t){var n=$("<div>");n.addClass(e._namePrepend+"-style"),n.addClass(e._namePrepend+"-style-"+t),n.append($("<label>").html(t)),n.append($("<input>",{type:"text",name:t})),r.append(n)}),Object.keys(e.cssProperties).forEach(function(t){var n=$("<div>"),o=e.cssProperties[t];t=e._decamelize(t),n.addClass(e._namePrepend+"-style"),n.addClass(e._namePrepend+"-style-"+t),_.isObject(o)?Object.keys(o).forEach(function(r){var a=o[r],i=$("<"+r+">");_.isObject(a)?(Object.keys(a).forEach(function(e){var t=a[e];"html"!=e?i.attr(e,t):i.html(t)}),(!i.attr("name")||i.attr("name").length<=0)&&i.attr("name",e._cssInputNamePrepend+t)):i.html(a),n.append(i)}):n.append($("<input>",{type:"hidden",name:e._cssInputNamePrepend+t,value:o})),r.append(n)}),t.append(r),e.$preview=t.append(n),t.html()},_getBackgroundColorForForegroundColor:function(e){e=e.substr(1);var t=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),n=parseInt(e.substr(4,2),16),o=(299*t+587*r+114*n)/1e3;return o>=128?"black":"white"},loadData:function(e){var t=this;delete e.text,delete e.format,Object.keys(e).forEach(function(r){var n=e[r];_.isObject(n)?Object.keys(n).forEach(function(e){var o=n[e],a='[class*="'+t._namePrepend+"-"+r+"-"+e+'"] > input',i=t.$editor.find(a);"range"==i.attr("type")?i.val(parseInt(o)):"checkbox"==i.attr("type")?i.prop("checked",i.val()==o):i.val(o)}):t.$editor.find('[name="'+r+'"]').val(n)}),t._renderPreview(t)()},onBlockRender:function(){this.$editor.on("change",this._renderPreview(this)),this.$editor.on("input",this._renderPreview(this))},_renderPreview:function(e){return function(t){var r=e.toHTML();e.$el.find(".st-button-preview").html(r)}},_decamelize:function(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()},_serializeData:function(){var e=this,t={};t.caption=e.$el.find('input[name="caption"]').val(),t.href=e.$el.find('input[name="href"]').val(),t.onclick=e.$el.find('input[name="onclick"]').val(),t.style={};var r=e.$el.find('input[name^="'+e._cssInputNamePrepend+'"]');return r.each(function(r,n){n=$(n);var o=new RegExp("^"+e._cssInputNamePrepend,"i"),a=n.attr("name"),i=n.attr("units"),s=a.replace(o,"");if(o.test(a)&&s.length>0){var l=n.val();isNaN(l)||(l+=i&&i.length>0?i:"px"),"checkbox"!=n.attr("type")&&"radio"!=n.attr("type")||n.is(":checked")||(l=""),t.style[s]=l}}),t.text=e.toHTML(t),t.format="html",t},toHTML:function(e){var t=this;e=e||t.getBlockData();var r=$("<a>");return r.attr("onclick",e.onclick),r.attr("href",e.href),r.html(e.caption),Object.keys(e.style).forEach(function(t){r.css(t,e.style[t])}),e.style["background-color"]&&r.css("color",t._getBackgroundColorForForegroundColor(e.style["background-color"])),r[0].outerHTML}})):console.error("SirTrevor.Blocks.Button could not load because SirTrevor wasn't found")}(),function(){"use strict";return SirTrevor?void(SirTrevor.Blocks.ImageEdit=SirTrevor.Blocks.Image.extend({type:"image_edit",onDrop:function(e){var t=e.files[0],r="undefined"!=typeof URL?URL:"undefined"!=typeof webkitURL?webkitURL:null;if(/image/.test(t.type)){this.$inputs.hide(),this.$editor.html($("<img>",{src:r.createObjectURL(t)})).show(),this.loading();var n=this.$editor.find(">img");n.cropper({built:function(){this.$cropper=function(){return n.cropper.apply(n,arguments)},this.ready()}.bind(this)})}},_serializeData:function(){var e={file:{url:null}};return this.$cropper&&(e.file.url=this.$cropper("getCroppedCanvas").toDataURL()),e}})):console.error("SirTrevor.Blocks.ImageEdit could not load because SirTrevor wasn't found")}(),function(){"use strict";return SirTrevor?void(SirTrevor.Blocks.Widget=SirTrevor.Block.extend({type:"widget",title:"Widget",icon_name:"code",pastable:!0,paste_options:{html:['<div style="text-align: center;  padding:20px;">',"  <span>Paste your external widget html here</span>",'  <textarea class="st-paste-block" style="width: 100%; padding: 0.6em; border: 1px solid #D4D4D4;"  placeholder="Paste your code here"></textarea>',"</div>"].join("\n")},_serializeData:function(){return{format:"html",text:this.$el.find("textarea").val()}},loadData:function(e){this.loadPastedContent(e.text)},onContentPasted:function(e){this.loadPastedContent($(e.target).val())},loadPastedContent:function(e){this.$el.find("textarea").val(e),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;");var t=$("<pre>"),r=$("<code>",{"class":"lang-html"});r.html(e),hljs.highlightBlock(r.get()[0]),t.append(r),this.$editor.html(t),this.$inputs.hide()}})):console.error("SirTrevor.Blocks.Widget could not load because SirTrevor wasn't found")}();
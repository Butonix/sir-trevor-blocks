!function(){"use strict";return SirTrevor?void(SirTrevor.Blocks.Button=SirTrevor.Block.extend({type:"button",title:"Button",icon_name:"image",cssProperties:{display:"block",textDecoration:"none",margin:"0 auto",border:"2px solid",textAlign:"center",backgroundColor:{label:"Background Color",input:{type:"color"}},borderWidth:{label:"Border Width",input:{type:"range",min:0,max:6,step:1,units:"px"}},borderColor:{label:"Border Color",input:{type:"color"}},borderRadius:{label:"Border Radius",input:{type:"range",min:0,max:100,step:1,units:"px"}},width:{label:"Width",input:{type:"range",min:10,max:100,step:1,units:"%"}},lineHeight:{label:"Height",input:{type:"range",min:0,max:500,step:1,units:"%"}},fontStyle:{label:"Italic",input:{type:"checkbox",value:"italic"}},fontWeight:{label:"Bold",input:{type:"checkbox",value:"bold"}}},_namePrepend:"st-button",_cssInputNamePrepend:"css_",editorHTML:function(){var e=this,t=$("<div>",{"class":"st-button"}),n=$("<div>",{"class":"st-button-editor"}),r=$("<div>",{"class":"st-button-preview"}),a=n.append($("<div>"));a.append($("<label>").html("Caption")),a.append($("<input>",{type:"text",name:"caption"}));var o=n.append($("<div>"));o.append($("<label>").html("href")),o.append($("<input>",{type:"text",name:"href"}));var i=n.append($("<div>"));return i.append($("<label>").html("On Click")),i.append($("<input>",{type:"text",name:"onclick"})),Object.keys(e.cssProperties).forEach(function(t){var r=$("<div>"),a=e.cssProperties[t];t=e._decamelize(t),r.addClass(e._namePrepend+"-style"),r.addClass(e._namePrepend+"-style-"+t),_.isObject(a)?Object.keys(a).forEach(function(n){var o=a[n],i=$("<"+n+">");_.isObject(o)?(Object.keys(o).forEach(function(e){var t=o[e];"html"!=e?i.attr(e,t):i.html(t)}),(!i.attr("name")||i.attr("name").length<=0)&&i.attr("name",e._cssInputNamePrepend+t)):i.html(o),r.append(i)}):r.append($("<input>",{type:"hidden",name:e._cssInputNamePrepend+t,value:a})),n.append(r)}),t.append(n),e.$preview=t.append(r),t.html()},_getBackgroundColorForForegroundColor:function(e){e=e.substr(1);var t=parseInt(e.substr(0,2),16),n=parseInt(e.substr(2,2),16),r=parseInt(e.substr(4,2),16),a=(299*t+587*n+114*r)/1e3;return a>=128?"black":"white"},loadData:function(e){var t=this;delete e.text,delete e.format,Object.keys(e).forEach(function(n){var r=e[n];_.isObject(r)?Object.keys(r).forEach(function(e){var a=r[e],o='[class*="'+t._namePrepend+"-"+n+"-"+e+'"] > input',i=t.$editor.find(o);"range"==i.attr("type")?i.val(parseInt(a)):"checkbox"==i.attr("type")?i.prop("checked",i.val()==a):i.val(a)}):t.$editor.find('[name="'+n+'"]').val(r)}),t._renderPreview(t)()},onBlockRender:function(){this.$editor.on("change",this._renderPreview(this)),this.$editor.on("input",this._renderPreview(this))},_renderPreview:function(e){return function(t){var n=e.toHTML();e.$el.find(".st-button-preview").html(n)}},_decamelize:function(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()},_serializeData:function(){var e=this,t={};t.caption=e.$el.find('input[name="caption"]').val(),t.href=e.$el.find('input[name="href"]').val(),t.onclick=e.$el.find('input[name="onclick"]').val(),t.style={};var n=e.$el.find('input[name^="'+e._cssInputNamePrepend+'"]');return n.each(function(n,r){r=$(r);var a=new RegExp("^"+e._cssInputNamePrepend,"i"),o=r.attr("name"),i=r.attr("units"),l=o.replace(a,"");if(a.test(o)&&l.length>0){var s=r.val();isNaN(s)||(s+=i&&i.length>0?i:"px"),"checkbox"!=r.attr("type")&&"radio"!=r.attr("type")||r.is(":checked")||(s=""),t.style[l]=s}}),t.text=e.toHTML(t),t.format="html",t},toHTML:function(e){var t=this;e=e||t.getBlockData();var n=$("<a>");return n.attr("onclick",e.onclick),n.attr("href",e.href),n.html(e.caption),Object.keys(e.style).forEach(function(t){n.css(t,e.style[t])}),e.style["background-color"]&&n.css("color",t._getBackgroundColorForForegroundColor(e.style["background-color"])),n[0].outerHTML}})):console.error("SirTrevor.Blocks.Button could not load because SirTrevor wasn't found")}(),function(){"use strict";return SirTrevor?void(SirTrevor.Blocks.Widget=SirTrevor.Block.extend({type:"widget",title:"Widget",icon_name:"code",pastable:!0,paste_options:{html:['<div style="text-align: center;  padding:20px;">',"  <span>Paste your external widget html here</span>",'  <textarea class="st-paste-block" style="width: 100%; padding: 0.6em; border: 1px solid #D4D4D4;"  placeholder="Paste your code here"></textarea>',"</div>"].join("\n")},_serializeData:function(){return{format:"html",text:this.$el.find("textarea").val()}},loadData:function(e){this.loadPastedContent(e.text)},onContentPasted:function(e){this.loadPastedContent($(e.target).val())},loadPastedContent:function(e){this.$el.find("textarea").val(e),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;");var t=$("<pre>"),n=$("<code>",{"class":"lang-html"});n.html(e),hljs.highlightBlock(n.get()[0]),t.append(n),this.$editor.html(t),this.$inputs.hide()}})):console.error("SirTrevor.Blocks.Widget could not load because SirTrevor wasn't found")}();